(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{3156:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2);\n\n// function getFeatureEntry<C extends null, A extends null, S extends null>(\n//   containers: C, actions: A, selectors: S, redux?: IReduxEntry): ResultEntry<{}, {}, {}>;\nfunction makeFeatureEntry(containers, actions, selectors, redux) {\n    return tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ "a"]({ actions: actions, selectors: selectors, containers: containers }, redux);\n}\n/* harmony default export */ __webpack_exports__["a"] = (makeFeatureEntry);\n\n\n//# sourceURL=webpack:///./shared/helpers/makeFeatureEntry.ts?')},3157:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\nvar actions_namespaceObject = {};\n__webpack_require__.r(actions_namespaceObject);\n__webpack_require__.d(actions_namespaceObject, "setProgress", function() { return actions_setProgress; });\n__webpack_require__.d(actions_namespaceObject, "createDao", function() { return communication_createDao; });\n__webpack_require__.d(actions_namespaceObject, "createDaoSuccess", function() { return createDaoSuccess; });\n__webpack_require__.d(actions_namespaceObject, "createDaoFail", function() { return createDaoFail; });\nvar selectors_namespaceObject = {};\n__webpack_require__.r(selectors_namespaceObject);\n__webpack_require__.d(selectors_namespaceObject, "selectState", function() { return selectState; });\n__webpack_require__.d(selectors_namespaceObject, "selectProgress", function() { return selectProgress; });\n__webpack_require__.d(selectors_namespaceObject, "selectCreatedDao", function() { return selectCreatedDao; });\n__webpack_require__.d(selectors_namespaceObject, "selectCommunication", function() { return selectCommunication; });\nvar containers_namespaceObject = {};\n__webpack_require__.r(containers_namespaceObject);\n__webpack_require__.d(containers_namespaceObject, "CreateDaoButton", function() { return CreateDaoButton_CreateDaoButton; });\n\n// EXTERNAL MODULE: ./shared/helpers/makeFeatureEntry.ts\nvar makeFeatureEntry = __webpack_require__(3156);\n\n// EXTERNAL MODULE: ../node_modules/react/index.js\nvar react = __webpack_require__(0);\n\n// EXTERNAL MODULE: ../node_modules/react-redux/es/index.js + 18 modules\nvar es = __webpack_require__(90);\n\n// EXTERNAL MODULE: ./services/i18n/index.ts + 16 modules\nvar i18n = __webpack_require__(10);\n\n// EXTERNAL MODULE: ./shared/helpers/react/index.ts + 12 modules\nvar helpers_react = __webpack_require__(39);\n\n// EXTERNAL MODULE: ./shared/helpers/redux/index.ts + 8 modules\nvar redux = __webpack_require__(198);\n\n// EXTERNAL MODULE: ./shared/view/elements/index.ts + 56 modules\nvar view_elements = __webpack_require__(4);\n\n// EXTERNAL MODULE: ./shared/view/elements/Icons/index.ts + 36 modules\nvar Icons = __webpack_require__(29);\n\n// EXTERNAL MODULE: ./shared/view/components/index.ts + 22 modules\nvar components = __webpack_require__(85);\n\n// EXTERNAL MODULE: ../node_modules/redux-make-communication/dist/index.js\nvar dist = __webpack_require__(251);\n\n// CONCATENATED MODULE: ./features/createDao/redux/actions/communication.ts\nvar communication_a;\n\nvar communication_createDao = (communication_a = Object(dist["makeCommunicationActionCreators"])(\'CREATE_DAO:CREATE_DAO\', \'CREATE_DAO:CREATE_DAO_SUCCESS\', \'CREATE_DAO:CREATE_DAO_FAIL\'), communication_a.execute), createDaoSuccess = communication_a.completed, createDaoFail = communication_a.failed;\n\n// CONCATENATED MODULE: ./features/createDao/redux/actions/index.ts\nfunction actions_setProgress(progress) {\n    return {\n        type: \'CREATE_DAO:SET_PROGRESS\',\n        payload: { progress: progress },\n    };\n}\n\n\n// CONCATENATED MODULE: ./features/createDao/redux/selectors.ts\n\nfunction selectState(state) {\n    return state.createDao;\n}\nfunction selectProgress(state) {\n    return selectState(state).progress;\n}\nfunction selectCreatedDao(state) {\n    return selectState(state).createdDao;\n}\nvar selectCommunication = Object(redux["e" /* makeCommunicationSelector */])(selectState);\n\n// EXTERNAL MODULE: ../node_modules/tslib/tslib.es6.js\nvar tslib_es6 = __webpack_require__(2);\n\n// EXTERNAL MODULE: ../node_modules/ramda/es/memoizeWith.js\nvar memoizeWith = __webpack_require__(3130);\n\n// EXTERNAL MODULE: ../node_modules/ramda/es/identity.js + 1 modules\nvar identity = __webpack_require__(1354);\n\n// EXTERNAL MODULE: ../node_modules/@aragon/wrapper/dist/index.js\nvar wrapper_dist = __webpack_require__(780);\n\n// EXTERNAL MODULE: ./core/constants/index.ts + 3 modules\nvar constants = __webpack_require__(31);\n\n// CONCATENATED MODULE: ./shared/helpers/aragon-wrapper.ts\nvar _this = undefined;\n\n\n\nvar isNameUsed = function (name) { return tslib_es6["b" /* __awaiter */](_this, void 0, void 0, function () {\n    return tslib_es6["e" /* __generator */](this, function (_a) {\n        return [2 /*return*/, Object(wrapper_dist["isNameUsed"])(name, {\n                provider: constants["h" /* web3Providers */].default,\n                registryAddress: constants["b" /* NETWORK_CONFIG */].aragonEnsRegistry,\n            })];\n    });\n}); };\n\n// EXTERNAL MODULE: ./shared/validators/index.ts + 11 modules\nvar validators = __webpack_require__(101);\n\n// EXTERNAL MODULE: ./shared/view/form/index.ts + 9 modules\nvar view_form = __webpack_require__(381);\n\n// EXTERNAL MODULE: ./services/daoApi/index.ts + 12 modules\nvar daoApi = __webpack_require__(88);\n\n// CONCATENATED MODULE: ./features/createDao/view/containers/CreateDaoForm/CreateDaoForm.tsx\nvar CreateDaoForm_this = undefined;\n\n\n\n\n\n\n\n\n\n\n\n\nvar fieldNames = {\n    domainName: \'domainName\',\n    description: \'description\',\n    goal: \'goal\',\n};\nvar initialValues = {\n    domainName: \'\',\n    description: daoApi["a" /* DAO_DESCRIPTION */],\n    goal: daoApi["b" /* DAO_GOAL */],\n};\nfunction mapState(state) {\n    return {\n        creating: selectCommunication(state, \'daoCreating\'),\n    };\n}\nvar mapDispatch = {\n    createDao: communication_createDao,\n};\nvar intl = i18n["d" /* tKeys */].features.createDao;\nvar validateDaoNameUsed = memoizeWith["a" /* default */](identity["a" /* default */], function (domain) { return tslib_es6["b" /* __awaiter */](CreateDaoForm_this, void 0, void 0, function () {\n    var isUsed;\n    return tslib_es6["e" /* __generator */](this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, isNameUsed(domain)];\n            case 1:\n                isUsed = _a.sent();\n                return [2 /*return*/, isUsed ? i18n["d" /* tKeys */].shared.validation.isUsedDaoName.getKey() : undefined];\n        }\n    });\n}); });\nvar syncValidateDao = Object(validators["b" /* composeValidators */])(validators["c" /* isRequired */], validators["e" /* maxStringLength */].bind(null, 30), validators["a" /* allowedCharactersForDaoName */]);\nfunction validateDaoName(domain) {\n    return tslib_es6["b" /* __awaiter */](this, void 0, void 0, function () {\n        return tslib_es6["e" /* __generator */](this, function (_a) {\n            return [2 /*return*/, syncValidateDao(domain) || validateDaoNameUsed(domain)];\n        });\n    });\n}\nfunction CreateDaoForm(props) {\n    var createDao = props.createDao, creating = props.creating, onCancel = props.onCancel;\n    var t = Object(i18n["e" /* useTranslate */])().t;\n    // tslint:disable:jsx-key\n    var formFields = [\n        (react["createElement"](view_form["b" /* TextInputField */], { name: fieldNames.domainName, label: t(intl.fields.domainName.getKey()), validate: validateDaoName, fullWidth: true })),\n        (react["createElement"](view_form["a" /* NumberInputField */], { suffix: " DAI", name: fieldNames.goal, label: t(intl.fields.goal.getKey()), validate: validators["c" /* isRequired */], fullWidth: true, disabled: true })),\n        (react["createElement"](view_form["b" /* TextInputField */], { name: fieldNames.description, label: t(intl.fields.description.getKey()), validate: validators["c" /* isRequired */], fullWidth: true, disabled: true })),\n    ];\n    // tslint:enable:jsx-key\n    return (react["createElement"](components["f" /* RequestForm */], { onCancel: onCancel, onSubmit: createDao, initialValues: initialValues, cancelButton: t(intl.form.cancel.getKey()), submitButton: t(intl.form.submit.getKey()), withoutAddress: true, fields: formFields, disabled: creating.isRequesting }));\n}\n/* harmony default export */ var CreateDaoForm_CreateDaoForm = (Object(es["b" /* connect */])(mapState, mapDispatch)(CreateDaoForm));\n\n// EXTERNAL MODULE: ../node_modules/classnames/index.js\nvar classnames = __webpack_require__(7);\nvar classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);\n\n// EXTERNAL MODULE: ./shared/styles/index.ts + 2 modules\nvar styles = __webpack_require__(14);\n\n// EXTERNAL MODULE: ./shared/helpers/style/index.ts + 3 modules\nvar style = __webpack_require__(3);\n\n// CONCATENATED MODULE: ./features/createDao/view/containers/CreateDaoProgress/StageStatus/StageStatus.style.ts\n\n\nvar StageStatus_style_styles = function (theme) { return ({\n    gray: Object(style["b" /* rule */])({\n        color: theme.extra.colors.topaz,\n    }),\n    positive: Object(style["b" /* rule */])({\n        color: theme.extra.colors.shamrock,\n    }),\n    waiting: Object(style["b" /* rule */])({\n        color: theme.extra.colors.royalPurple,\n    }),\n    icon: Object(style["b" /* rule */])({\n        display: \'flex\',\n        fontSize: theme.spacing.unit * 5,\n    }),\n}); };\nvar provideStyles = Object(styles["c" /* withStyles */])(StageStatus_style_styles);\n\n// CONCATENATED MODULE: ./features/createDao/view/containers/CreateDaoProgress/StageStatus/StageStatus.tsx\n\n\n\n\n\n\nfunction StageStatus(props) {\n    var classes = props.classes, title = props.title, isDone = props.isDone;\n    var t = Object(i18n["e" /* useTranslate */])().t;\n    return (react["createElement"](view_elements["i" /* Grid */], { container: true, spacing: 16, direction: "column", alignItems: "center" },\n        react["createElement"](view_elements["i" /* Grid */], { item: true },\n            react["createElement"](view_elements["E" /* Typography */], { variant: "body2", className: !isDone ? classes.gray : void 0 }, title)),\n        react["createElement"](view_elements["i" /* Grid */], { item: true }, isDone\n            ? react["createElement"](Icons["f" /* Checked */], { className: classnames_default()(classes.icon, classes.positive) })\n            : react["createElement"](view_elements["e" /* CircleProgressBar */], { size: 40 })),\n        react["createElement"](view_elements["i" /* Grid */], { item: true },\n            react["createElement"](view_elements["E" /* Typography */], { variant: "overline", className: isDone ? classes.positive : classes.waiting }, t(isDone\n                ? i18n["d" /* tKeys */].shared.done.getKey()\n                : i18n["d" /* tKeys */].shared.waiting.getKey())))));\n}\n/* harmony default export */ var StageStatus_StageStatus = (provideStyles(StageStatus));\n\n// CONCATENATED MODULE: ./features/createDao/view/containers/CreateDaoProgress/CreateDaoProgress.style.ts\n\n\nvar CreateDaoProgress_style_styles = function (theme) { return ({\n    stages: Object(style["b" /* rule */])({\n        background: theme.extra.colors.ghostWhite,\n        borderRadius: 4,\n        padding: theme.spacing.unit * 2 + "px " + theme.spacing.unit * 7 + "px",\n    }),\n}); };\nvar CreateDaoProgress_style_provideStyles = Object(styles["c" /* withStyles */])(CreateDaoProgress_style_styles);\n\n// CONCATENATED MODULE: ./features/createDao/view/containers/CreateDaoProgress/CreateDaoProgress.tsx\n\n\n\n\n\n\n\nfunction CreateDaoProgress_mapState(state) {\n    return {\n        progress: selectProgress(state),\n    };\n}\nvar progressTKeys = i18n["d" /* tKeys */].features.createDao.progress;\nvar stages = [\'initial\', \'token-creating\', \'dao-creating\', \'dao-created\'];\nfunction CreateDaoProgress(props) {\n    var classes = props.classes, progress = props.progress;\n    var t = Object(i18n["e" /* useTranslate */])().t;\n    var currentStage = stages.findIndex(function (stage) { return stage === progress; });\n    var isDoneToken = currentStage >= 2;\n    var isDoneDao = currentStage === stages.length;\n    return (react["createElement"](view_elements["i" /* Grid */], { container: true, spacing: 24 },\n        react["createElement"](view_elements["i" /* Grid */], { item: true, xs: 12 },\n            react["createElement"](view_elements["E" /* Typography */], { variant: "body1", align: "center" }, t(progressTKeys.description.getKey()))),\n        react["createElement"](view_elements["i" /* Grid */], { item: true, xs: 12 },\n            react["createElement"](view_elements["i" /* Grid */], { className: classes.stages, container: true, justify: "space-between" },\n                react["createElement"](view_elements["i" /* Grid */], { item: true },\n                    react["createElement"](StageStatus_StageStatus, { title: t(progressTKeys.tokenTitle.getKey()), isDone: isDoneToken })),\n                react["createElement"](view_elements["i" /* Grid */], { item: true },\n                    react["createElement"](StageStatus_StageStatus, { title: t(progressTKeys.coopTitle.getKey()), isDone: isDoneDao }))))));\n}\n/* harmony default export */ var CreateDaoProgress_CreateDaoProgress = (Object(es["b" /* connect */])(CreateDaoProgress_mapState)(CreateDaoProgress_style_provideStyles(CreateDaoProgress)));\n\n// CONCATENATED MODULE: ./features/createDao/view/containers/CreateDaoButton/CreateDaoButton.tsx\n\n\n\n\n\n\n\n\n\n\n\n\nvar CreateDaoButton_intl = i18n["d" /* tKeys */].features.createDao;\nfunction CreateDaoButton_mapState(state) {\n    return {\n        creating: selectCommunication(state, \'daoCreating\'),\n        progress: selectProgress(state),\n        createdDao: selectCreatedDao(state),\n    };\n}\nvar CreateDaoButton_mapDispatch = {\n    setProgress: actions_setProgress,\n};\nfunction CreateDaoButton(props) {\n    var progress = props.progress, creating = props.creating, setProgress = props.setProgress, onCreate = props.onCreate, createdDao = props.createdDao;\n    var _a = react["useState"](false), isOpened = _a[0], setIsOpened = _a[1];\n    var t = Object(i18n["e" /* useTranslate */])().t;\n    Object(helpers_react["c" /* useOnChangeState */])(creating, redux["d" /* isSucceededByState */], function () { return onCreate(createdDao); });\n    var handleIsOpenedChanging = react["useCallback"](function (opened) {\n        setIsOpened(opened);\n        if (!creating.isRequesting) {\n            setProgress(\'initial\');\n        }\n    }, []);\n    var handleRetryClick = react["useCallback"](function () {\n        setProgress(\'initial\');\n    }, []);\n    var showForm = progress === \'initial\';\n    return (react["createElement"](react["Fragment"], null,\n        react["createElement"](view_elements["c" /* Button */], { variant: "contained", color: "secondary", onClick: handleIsOpenedChanging.bind(null, true) },\n            creating.isRequesting\n                ? react["createElement"](view_elements["e" /* CircleProgressBar */], { size: 16 })\n                : react["createElement"](Icons["i" /* Cooperative */], null),\n            t(CreateDaoButton_intl.createButton.getKey())),\n        react["createElement"](components["d" /* Modal */], { size: "large", isOpen: isOpened && !creating.error, title: t(CreateDaoButton_intl[showForm ? \'form\' : \'progress\'].title.getKey()), onClose: handleIsOpenedChanging.bind(null, false) }, showForm ? react["createElement"](CreateDaoForm_CreateDaoForm, { onCancel: handleIsOpenedChanging.bind(null, false) }) : react["createElement"](CreateDaoProgress_CreateDaoProgress, null)),\n        react["createElement"](components["b" /* ErrorModal */], { isOpened: isOpened && !!creating.error, onClose: handleIsOpenedChanging.bind(null, false), onRetry: handleRetryClick })));\n}\n/* harmony default export */ var CreateDaoButton_CreateDaoButton = (Object(es["b" /* connect */])(CreateDaoButton_mapState, CreateDaoButton_mapDispatch)(CreateDaoButton));\n\n// CONCATENATED MODULE: ./features/createDao/view/containers/index.ts\n\n\n// EXTERNAL MODULE: ../node_modules/redux/es/redux.js\nvar es_redux = __webpack_require__(73);\n\n// CONCATENATED MODULE: ./features/createDao/redux/initial.ts\nvar initial = {\n    communication: {\n        daoCreating: {\n            error: \'\',\n            isRequesting: false,\n        },\n    },\n    progress: \'initial\',\n    createdDao: \'\',\n};\n\n// CONCATENATED MODULE: ./features/createDao/redux/reducers/communication.ts\n\n\n\nvar communicationReducer = Object(es_redux["combineReducers"])({\n    daoCreating: Object(dist["makeCommunicationReducer"])(\'CREATE_DAO:CREATE_DAO\', \'CREATE_DAO:CREATE_DAO_SUCCESS\', \'CREATE_DAO:CREATE_DAO_FAIL\', initial.communication.daoCreating),\n});\n\n// CONCATENATED MODULE: ./features/createDao/redux/reducers/index.ts\n\n\n\n\n/* harmony default export */ var reducers = (Object(es_redux["combineReducers"])({\n    communication: Object(redux["a" /* composeReducers */])([\n        communicationReducer,\n        function (state, action) {\n            if (state === void 0) { state = initial.communication; }\n            switch (action.type) {\n                case \'CREATE_DAO:SET_PROGRESS\':\n                    return action.payload.progress === \'initial\' ? initial.communication : state;\n                default:\n                    return state;\n            }\n        },\n    ]),\n    progress: function (state, action) {\n        if (state === void 0) { state = initial.progress; }\n        switch (action.type) {\n            case \'CREATE_DAO:SET_PROGRESS\':\n                return action.payload.progress;\n            default:\n                return state;\n        }\n    },\n    createdDao: function (state, action) {\n        if (state === void 0) { state = initial.createdDao; }\n        switch (action.type) {\n            case \'CREATE_DAO:CREATE_DAO_SUCCESS\':\n                return action.payload.createdDao;\n            default:\n                return state;\n        }\n    },\n}));\n\n// EXTERNAL MODULE: ../node_modules/redux-saga/dist/redux-saga-effects-npm-proxy.esm.js + 1 modules\nvar redux_saga_effects_npm_proxy_esm = __webpack_require__(94);\n\n// EXTERNAL MODULE: ./shared/helpers/index.ts + 2 modules\nvar helpers = __webpack_require__(563);\n\n// EXTERNAL MODULE: ../node_modules/bn.js/lib/bn.js\nvar bn = __webpack_require__(53);\nvar bn_default = /*#__PURE__*/__webpack_require__.n(bn);\n\n// EXTERNAL MODULE: ./shared/helpers/web3.ts + 2 modules\nvar helpers_web3 = __webpack_require__(49);\n\n// EXTERNAL MODULE: ../node_modules/@aragon/apm/src/index.js\nvar src = __webpack_require__(1275);\nvar src_default = /*#__PURE__*/__webpack_require__.n(src);\n\n// EXTERNAL MODULE: ../node_modules/@aragon/wrapper/dist/utils/index.js\nvar utils = __webpack_require__(435);\n\n// CONCATENATED MODULE: ./features/createDao/redux/sagas/getBuilder.ts\nvar getBuilder_this = undefined;\n\n\n\n\nvar getBuilder = function (from, _a) {\n    var apmOptions = _a.apmOptions, defaultGasPriceFn = _a.defaultGasPriceFn, web3 = _a.web3;\n    var apm = src_default()(web3, apmOptions);\n    var newToken = function (template, _a) {\n        var params = _a.params, _b = _a.options, options = _b === void 0 ? {} : _b;\n        return tslib_es6["b" /* __awaiter */](getBuilder_this, void 0, void 0, function () {\n            var tokenName, tokenSymbol, call, receipt, _c, _d, _e;\n            return tslib_es6["e" /* __generator */](this, function (_f) {\n                switch (_f.label) {\n                    case 0:\n                        tokenName = params[0], tokenSymbol = params[1];\n                        call = template.methods.newToken(tokenName, tokenSymbol);\n                        _d = (_c = call).send;\n                        _e = [{ from: from }];\n                        return [4 /*yield*/, applyCallGasOptions(call, options)];\n                    case 1: return [4 /*yield*/, _d.apply(_c, [tslib_es6["a" /* __assign */].apply(void 0, _e.concat([_f.sent()]))])];\n                    case 2:\n                        receipt = _f.sent();\n                        return [2 /*return*/, receipt.events.DeployToken.returnValues];\n                }\n            });\n        });\n    };\n    var newInstance = function (template, _a) {\n        var params = _a.params, _b = _a.options, options = _b === void 0 ? {} : _b;\n        return tslib_es6["b" /* __awaiter */](getBuilder_this, void 0, void 0, function () {\n            var call, receipt, _c, _d, _e;\n            var _f;\n            return tslib_es6["e" /* __generator */](this, function (_g) {\n                switch (_g.label) {\n                    case 0:\n                        call = (_f = template.methods).newInstance.apply(_f, params);\n                        _d = (_c = call).send;\n                        _e = [{ from: from }];\n                        return [4 /*yield*/, applyCallGasOptions(call, options)];\n                    case 1: return [4 /*yield*/, _d.apply(_c, [tslib_es6["a" /* __assign */].apply(void 0, _e.concat([_g.sent()]))])];\n                    case 2:\n                        receipt = _g.sent();\n                        return [2 /*return*/, receipt.events.DeployInstance.returnValues];\n                }\n            });\n        });\n    };\n    var applyCallGasOptions = function (call, txOptions) { return tslib_es6["b" /* __awaiter */](getBuilder_this, void 0, void 0, function () {\n        function getGas() {\n            return tslib_es6["b" /* __awaiter */](this, void 0, void 0, function () {\n                var estimatedGasLimit;\n                return tslib_es6["e" /* __generator */](this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, call.estimateGas({ from: from })];\n                        case 1:\n                            estimatedGasLimit = _a.sent();\n                            return [2 /*return*/, Object(utils["getRecommendedGasLimit"])(web3, estimatedGasLimit, { gasFuzzFactor: 1.1 })];\n                    }\n                });\n            });\n        }\n        var gas, _a, gasPrice, _b;\n        return tslib_es6["e" /* __generator */](this, function (_c) {\n            switch (_c.label) {\n                case 0:\n                    _a = txOptions.gas;\n                    if (_a) return [3 /*break*/, 2];\n                    return [4 /*yield*/, getGas()];\n                case 1:\n                    _a = (_c.sent());\n                    _c.label = 2;\n                case 2:\n                    gas = _a;\n                    _b = txOptions.gasPrice;\n                    if (_b) return [3 /*break*/, 4];\n                    return [4 /*yield*/, defaultGasPriceFn(gas)];\n                case 3:\n                    _b = (_c.sent());\n                    _c.label = 4;\n                case 4:\n                    gasPrice = _b;\n                    return [2 /*return*/, { gas: gas, gasPrice: gasPrice }];\n            }\n        });\n    }); };\n    var newDAO = function (templateEnsId, tokenParams, instanceParams) { return tslib_es6["b" /* __awaiter */](getBuilder_this, void 0, void 0, function () {\n        var _a, contractAddress, abi, template, tokenPromise, instancePromise;\n        return tslib_es6["e" /* __generator */](this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4 /*yield*/, apm.getVersion(templateEnsId, constants["a" /* LAST_STABLE_TEMPLATE_VERSION */])];\n                case 1:\n                    _a = _b.sent(), contractAddress = _a.contractAddress, abi = _a.abi;\n                    if (!contractAddress) {\n                        throw new Error("No contract found on APM for template \'" + templateEnsId + "\'");\n                    }\n                    if (!abi) {\n                        throw new Error("Could not fetch ABI for template \'" + templateEnsId + "\'");\n                    }\n                    template = new web3.eth.Contract(abi, contractAddress);\n                    tokenPromise = newToken(template, tokenParams);\n                    instancePromise = tokenPromise.then(function () { return newInstance(template, instanceParams); });\n                    return [2 /*return*/, [tokenPromise, instancePromise]];\n            }\n        });\n    }); };\n    return { newDAO: newDAO };\n};\n\n// CONCATENATED MODULE: ./features/createDao/redux/sagas/buildDao.ts\nvar buildDao_this = undefined;\n\n\n\n\n\nvar percentageBase = new bn_default.a(10).pow(new bn_default.a(16));\n// DEV only\n// provider = new Web3.providers.WebsocketProvider(\'ws://localhost:8546\')\nvar provider = constants["h" /* web3Providers */].wallet;\nvar ensRegistryAddress = constants["b" /* NETWORK_CONFIG */].aragonEnsRegistry;\nvar ipfsConf = constants["b" /* NETWORK_CONFIG */].defaultIpfsConfig;\nvar buildDao = function (domainName) { return tslib_es6["b" /* __awaiter */](buildDao_this, void 0, void 0, function () {\n    var tokenName, tokenSymbol, minAcceptanceQuorum, supportNeeded, voteDuration, web3, account, apmOptions, builder, tokenParams, templateInstanceParams;\n    return tslib_es6["e" /* __generator */](this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (!domainName) {\n                    throw new Error(\'No co-op name set\');\n                }\n                tokenName = domainName + " token";\n                tokenSymbol = domainName.slice(0, 2) + "CT";\n                minAcceptanceQuorum = percentageBase.muln(15);\n                supportNeeded = percentageBase.muln(50);\n                voteDuration = 24 * 60 * 60;\n                web3 = Object(helpers_web3["e" /* getWeb3 */])(provider);\n                return [4 /*yield*/, Object(helpers_web3["d" /* getMainAccount */])(web3)];\n            case 1:\n                account = _a.sent();\n                if (account === null) {\n                    throw new Error(\'No accounts detected in the environment (try to unlock your wallet)\');\n                }\n                apmOptions = { ensRegistryAddress: ensRegistryAddress, ipfs: ipfsConf };\n                builder = getBuilder(account, { apmOptions: apmOptions, defaultGasPriceFn: constants["g" /* defaultGasPriceFn */], web3: web3 });\n                tokenParams = [tokenName, tokenSymbol];\n                templateInstanceParams = getTemplateInstanceParams({ domainName: domainName, minAcceptanceQuorum: minAcceptanceQuorum, supportNeeded: supportNeeded, voteDuration: voteDuration }, account);\n                return [2 /*return*/, builder.newDAO(constants["d" /* TEMPLATE_ENS_ID */], { params: tokenParams }, { params: templateInstanceParams })];\n        }\n    });\n}); };\nvar getTemplateInstanceParams = function (\n// domainName: String of co-op name\n// supportNeeded: BN between 0 (0%) and 1e18 - 1 (99.99...%).\n// minAcceptanceQuorum: BN between 0 (0%) and 1e18 - 1(99.99...%).\n// voteDuration: Duration in seconds.\nparams, account) {\n    var domainName = params.domainName, supportNeeded = params.supportNeeded, minAcceptanceQuorum = params.minAcceptanceQuorum, voteDuration = params.voteDuration;\n    var percentageMax = new bn_default.a(10).pow(new bn_default.a(18));\n    if (supportNeeded.gte(percentageMax) ||\n        minAcceptanceQuorum.gte(percentageMax)) {\n        throw new Error("supported needed " + supportNeeded.toString() + " and minimum acceptance" +\n            ("quorum (" + minAcceptanceQuorum.toString() + ") must be below 100%"));\n    }\n    var tokenBase = new bn_default.a(10).pow(new bn_default.a(18));\n    var holders = [{ address: account, balance: 1 }];\n    var _a = holders.reduce(function (_a, holder) {\n        var accAccounts = _a[0], accStakes = _a[1];\n        return [\n            accAccounts.concat([holder.address]),\n            accStakes.concat([tokenBase.muln(holder.balance)]),\n        ];\n    }, [[], []]), accounts = _a[0], stakes = _a[1];\n    return [\n        domainName.toLowerCase(),\n        accounts,\n        stakes,\n        supportNeeded,\n        minAcceptanceQuorum,\n        voteDuration,\n    ];\n};\n\n// CONCATENATED MODULE: ./features/createDao/redux/sagas/index.ts\n\n\n\n\n\nvar createDaoType = \'CREATE_DAO:CREATE_DAO\';\nfunction getSaga(deps) {\n    return function saga() {\n        return tslib_es6["e" /* __generator */](this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, Object(redux_saga_effects_npm_proxy_esm["f" /* takeLatest */])(createDaoType, createDaoSaga, deps)];\n                case 1:\n                    _a.sent();\n                    return [2 /*return*/];\n            }\n        });\n    };\n}\nfunction createDaoSaga(_, action) {\n    var domainName, _a, tokenPromise_1, daoPromise_1, error_1, message;\n    return tslib_es6["e" /* __generator */](this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                domainName = action.payload.domainName;\n                _b.label = 1;\n            case 1:\n                _b.trys.push([1, 6, , 8]);\n                return [4 /*yield*/, Object(redux_saga_effects_npm_proxy_esm["c" /* put */])(actions_setProgress(\'token-creating\'))];\n            case 2:\n                _b.sent();\n                return [4 /*yield*/, Object(redux_saga_effects_npm_proxy_esm["b" /* call */])(buildDao, domainName)];\n            case 3:\n                _a = _b.sent(), tokenPromise_1 = _a[0], daoPromise_1 = _a[1];\n                return [4 /*yield*/, Object(redux_saga_effects_npm_proxy_esm["a" /* all */])([\n                        Object(redux_saga_effects_npm_proxy_esm["b" /* call */])(function token() {\n                            return tslib_es6["e" /* __generator */](this, function (_a) {\n                                switch (_a.label) {\n                                    case 0: return [4 /*yield*/, Object(redux_saga_effects_npm_proxy_esm["b" /* call */])(function () { return tokenPromise_1; })];\n                                    case 1:\n                                        _a.sent();\n                                        return [4 /*yield*/, Object(redux_saga_effects_npm_proxy_esm["c" /* put */])(actions_setProgress(\'dao-creating\'))];\n                                    case 2:\n                                        _a.sent();\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }),\n                        Object(redux_saga_effects_npm_proxy_esm["b" /* call */])(function dao() {\n                            return tslib_es6["e" /* __generator */](this, function (_a) {\n                                switch (_a.label) {\n                                    case 0: return [4 /*yield*/, Object(redux_saga_effects_npm_proxy_esm["b" /* call */])(function () { return daoPromise_1; })];\n                                    case 1:\n                                        _a.sent();\n                                        return [4 /*yield*/, Object(redux_saga_effects_npm_proxy_esm["c" /* put */])(actions_setProgress(\'dao-created\'))];\n                                    case 2:\n                                        _a.sent();\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }),\n                    ])];\n            case 4:\n                _b.sent();\n                return [4 /*yield*/, Object(redux_saga_effects_npm_proxy_esm["c" /* put */])(createDaoSuccess({ createdDao: domainName }))];\n            case 5:\n                _b.sent();\n                return [3 /*break*/, 8];\n            case 6:\n                error_1 = _b.sent();\n                message = Object(helpers["a" /* getErrorMsg */])(error_1);\n                return [4 /*yield*/, Object(redux_saga_effects_npm_proxy_esm["c" /* put */])(createDaoFail(message))];\n            case 7:\n                _b.sent();\n                return [3 /*break*/, 8];\n            case 8: return [2 /*return*/];\n        }\n    });\n}\n\n\n// CONCATENATED MODULE: ./features/createDao/redux/index.ts\n\n\n\n\n\n\n// CONCATENATED MODULE: ./features/createDao/entry.ts\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "entry", function() { return entry; });\n\n\n\nvar entry = Object(makeFeatureEntry["a" /* default */])(containers_namespaceObject, actions_namespaceObject, selectors_namespaceObject, {\n    reducers: { createDao: reducers },\n    sagas: [getSaga],\n});\n\n\n\n//# sourceURL=webpack:///./features/createDao/entry.ts_+_18_modules?')}}]);